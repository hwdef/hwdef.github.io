<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Kubernetes on 以梦喂马</title><link>https://www.hwdef.org/tags/kubernetes/</link><description>Recent content in Kubernetes on 以梦喂马</description><generator>Hugo</generator><language>zh</language><lastBuildDate>Thu, 06 Jul 2023 06:46:13 +0000</lastBuildDate><atom:link href="https://www.hwdef.org/tags/kubernetes/index.xml" rel="self" type="application/rss+xml"/><item><title>共享内存</title><link>https://www.hwdef.org/post/shared-memory/</link><pubDate>Thu, 06 Jul 2023 06:46:13 +0000</pubDate><guid>https://www.hwdef.org/post/shared-memory/</guid><description>&lt;p&gt;进程间通信最快的方式是什么？&lt;/p&gt;
&lt;p&gt;通过共享内存&lt;/p&gt;
&lt;p&gt;那么共享内存是什么？&lt;/p&gt;
&lt;p&gt;简单说，就是可以被多个进程访问的同一块内存。&lt;/p&gt;
&lt;p&gt;具体使用上，在 Linux 中，有个设备，路径是 /dev/shm，这个路径不在硬盘上，而是在内存上，程序如果需要使用共享内存，直接使用这个目录就可以了。&lt;/p&gt;</description></item><item><title>Kubelet在windows下获取的cpu数量不正确</title><link>https://www.hwdef.org/post/kubelet-windows-incorrect-cpu-count/</link><pubDate>Wed, 14 Apr 2021 17:09:42 +0800</pubDate><guid>https://www.hwdef.org/post/kubelet-windows-incorrect-cpu-count/</guid><description>&lt;p&gt;在 window 系统中，如果 cpu 的核心数量超过 64 个，那么 windows 会对 cpu 进行&lt;a href="https://docs.microsoft.com/en-us/windows/win32/procthread/processor-groups"&gt;分组&lt;/a&gt;。例如 72 核的 cpu，会被分为两个 36 核的 cpu 组。分组是为了更好的性能，但是分组也会带来其他的问题。&lt;/p&gt;</description></item><item><title>树莓派安装k8s注意事项</title><link>https://www.hwdef.org/post/raspberry-pi-k8s-installation-notes/</link><pubDate>Mon, 14 Dec 2020 13:53:45 +0800</pubDate><guid>https://www.hwdef.org/post/raspberry-pi-k8s-installation-notes/</guid><description>&lt;p&gt;树莓派 4b 已经有了 8g 版本，不只是 k3s，就算运行 k8s 也是可以了。我分别在 2g 和 8g 版本的树莓派上，使用 raspberry pi OS 和 ubuntu server 尝试了 k3s 和 k8s，有一些注意事项，在这里记录。&lt;/p&gt;</description></item><item><title>解决社区贡献时遇到的冲突</title><link>https://www.hwdef.org/post/resolve-community-contribution-conflicts/</link><pubDate>Fri, 03 Jul 2020 11:18:43 +0800</pubDate><guid>https://www.hwdef.org/post/resolve-community-contribution-conflicts/</guid><description>&lt;p&gt;在 github/kubernetes 社区做贡献，可能遇到很久都没人 approve 的情况，如果别人提交的代码与你的代码产生了冲突，就会提示你解决冲突，并且 rebase。&lt;/p&gt;
&lt;p&gt;网页上操作还是不习惯，写一下怎么在本地操作。&lt;/p&gt;</description></item><item><title>Kubeadm指定镜像源</title><link>https://www.hwdef.org/post/kubeadm-specify-image-repository/</link><pubDate>Fri, 29 May 2020 11:14:10 +0800</pubDate><guid>https://www.hwdef.org/post/kubeadm-specify-image-repository/</guid><description>&lt;p&gt;kubeadm 默认使用的镜像源是谷歌的，众所周知的原因，使用体验并不好。&lt;/p&gt;
&lt;p&gt;解决方法无非就是两个：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;科学上网&lt;/li&gt;
&lt;li&gt;换源&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;kubeadm 换源的方式很方便，只需在 init 的时候使用 &lt;code&gt;--image-repository&lt;/code&gt; 参数，后面加镜像源。国内一般用阿里云的，或者 azure 的。&lt;/p&gt;</description></item><item><title>去除k8s节点的污点（taint）</title><link>https://www.hwdef.org/post/remove-k8s-node-taint/</link><pubDate>Thu, 02 Jan 2020 22:30:02 +0800</pubDate><guid>https://www.hwdef.org/post/remove-k8s-node-taint/</guid><description>&lt;p&gt;首先查看 node 的对应规则&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-shell"&gt;kubectl describe node master |grep -E '(Roles|Taints)'
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中 master 为对应 node 的名字。&lt;/p&gt;
&lt;p&gt;之后修改查询出来的规则&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-shell"&gt;kubectl taint node master node-role.kubernetes.io/master-
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;同样，master 也是名字，最后的&lt;code&gt;-&lt;/code&gt;代表去除规则&lt;/p&gt;
&lt;p&gt;输出应该是类似 untaint 之类的。&lt;/p&gt;</description></item><item><title>K8s删除核心组件的pod</title><link>https://www.hwdef.org/post/k8s-delete-core-component-pods/</link><pubDate>Thu, 31 Oct 2019 17:21:07 +0800</pubDate><guid>https://www.hwdef.org/post/k8s-delete-core-component-pods/</guid><description>&lt;p&gt;kubernetes 有很多核心组件，例如 etcd 和 apiserver ，这些核心组件都可以用下面的命令查到。&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-shell"&gt;kubectl get pods --all-namespaces
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这些组件都在 &lt;code&gt;kube-system&lt;/code&gt; 的 namespace 下，&lt;/p&gt;
&lt;p&gt;那么如果你自己更改了这些组件的代码，然后想将自己的代码部署到 kubernetes 上应该怎么做呢？&lt;/p&gt;</description></item><item><title>Centos7用kubeadm部署k8s集群踩坑</title><link>https://www.hwdef.org/post/centos7-k8s-cluster-deployment-troubleshooting/</link><pubDate>Fri, 11 Oct 2019 10:21:40 +0800</pubDate><guid>https://www.hwdef.org/post/centos7-k8s-cluster-deployment-troubleshooting/</guid><description>&lt;p&gt;将 k8s 集群从 ubuntu 换到了 centos，用 kubeadm 部署遇到了几个坑，记录一下&lt;/p&gt;
&lt;h3 id="1epel"&gt;1.epel&lt;/h3&gt;
&lt;p&gt;centos 默认源里什么都没有，安装 epel 是必须的。&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-shell"&gt;sudo yum install epel-release
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="2hostname"&gt;2.hostname&lt;/h3&gt;
&lt;h4 id="21"&gt;2.1&lt;/h4&gt;
&lt;p&gt;centos 特别坑的一点是，hostname 不会根据 username 自动设置，正常情况下影响不大，但是遇到 k8s 之后，这就是个留给新手的大坑，&lt;/p&gt;</description></item></channel></rss>